<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>B√°o C√°o & Th·ªëng K√™ - HRM System</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Navigation -->
    <nav class="nav">
      <div class="container nav-container">
        <a href="index.html" class="nav-logo">HRM</a>
        <ul class="nav-menu">
          <li><a href="admin-dashboard.html" class="nav-link">Dashboard</a></li>
          <li><a href="admin-users.html" class="nav-link">Ng∆∞·ªùi d√πng</a></li>
          <li>
            <a href="admin-reports.html" class="nav-link active">B√°o c√°o</a>
          </li>
          <li><a href="#" class="nav-link" onclick="logout()">ƒêƒÉng xu·∫•t</a></li>
        </ul>
      </div>
    </nav>

    <!-- Reports Content -->
    <div class="dashboard-container">
      <div class="container" style="padding-top: 48px; padding-bottom: 48px">
        <div class="flex items-center justify-between mb-4">
          <h1>B√ÅO C√ÅO & TH·ªêNG K√ä</h1>
          <span class="badge badge-red">R·∫§T QUAN TR·ªåNG</span>
        </div>

        <!-- Report Builder -->
        <div class="card mb-4">
          <div class="card-header">
            <h3 class="card-title">T·∫†O B√ÅO C√ÅO M·ªöI</h3>
          </div>
          <div class="card-body">
            <form id="reportForm" onsubmit="handleGenerateReport(event)">
              <div class="grid grid-3 gap-3 mb-3">
                <div class="form-group">
                  <label class="form-label" for="reportType"
                    >Lo·∫°i b√°o c√°o *</label
                  >
                  <select id="reportType" class="form-select" required>
                    <option value="">Ch·ªçn lo·∫°i b√°o c√°o</option>
                    <option value="general">T·ªïng h·ª£p</option>
                    <option value="department">Theo ƒë∆°n v·ªã</option>
                    <option value="movement">Bi·∫øn ƒë·ªông nh√¢n s·ª±</option>
                    <option value="qualifications">Tr√¨nh ƒë·ªô h·ªçc v·∫•n</option>
                    <option value="statistics">Th·ªëng k√™ chuy√™n s√¢u</option>
                  </select>
                </div>
                <div class="form-group">
                  <label class="form-label" for="dateFrom">T·ª´ ng√†y</label>
                  <input type="date" id="dateFrom" class="form-input" />
                </div>
                <div class="form-group">
                  <label class="form-label" for="dateTo">ƒê·∫øn ng√†y</label>
                  <input type="date" id="dateTo" class="form-input" />
                </div>
              </div>

              <div class="grid grid-2 gap-3 mb-3">
                <div class="form-group">
                  <label class="form-label" for="department"
                    >ƒê∆°n v·ªã (t√πy ch·ªçn)</label
                  >
                  <select id="department" class="form-select">
                    <option value="">T·∫•t c·∫£</option>
                    <option value="H√†nh ch√≠nh">H√†nh ch√≠nh</option>
                    <option value="T√†i ch√≠nh">T√†i ch√≠nh</option>
                    <option value="Nh√¢n s·ª±">Nh√¢n s·ª±</option>
                    <option value="K·ªπ thu·∫≠t">K·ªπ thu·∫≠t</option>
                    <option value="Marketing">Marketing</option>
                  </select>
                </div>
                <div class="form-group">
                  <label class="form-label" for="exportFormat"
                    >ƒê·ªãnh d·∫°ng xu·∫•t *</label
                  >
                  <select id="exportFormat" class="form-select" required>
                    <option value="pdf">PDF</option>
                    <option value="excel">Excel</option>
                    <option value="csv">CSV</option>
                  </select>
                </div>
              </div>

              <div class="flex gap-2">
                <button type="submit" class="btn btn-primary">
                  T·∫°o b√°o c√°o
                </button>
                <button
                  type="button"
                  class="btn btn-accent"
                  onclick="scheduleReport()"
                >
                  L√™n l·ªãch
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- Quick Reports -->
        <div class="card mb-4">
          <div class="card-header">
            <h3 class="card-title">B√ÅO C√ÅO NHANH</h3>
          </div>
          <div class="card-body">
            <div class="quick-reports">
              <button
                class="report-quick-btn"
                onclick="generateQuickReport('monthly')"
              >
                <div class="report-icon">üìÖ</div>
                <div>B√°o c√°o th√°ng</div>
              </button>
              <button
                class="report-quick-btn"
                onclick="generateQuickReport('quarterly')"
              >
                <div class="report-icon">üìä</div>
                <div>B√°o c√°o qu√Ω</div>
              </button>
              <button
                class="report-quick-btn"
                onclick="generateQuickReport('annual')"
              >
                <div class="report-icon">üìà</div>
                <div>B√°o c√°o nƒÉm</div>
              </button>
              <button
                class="report-quick-btn"
                onclick="generateQuickReport('custom')"
              >
                <div class="report-icon">‚öôÔ∏è</div>
                <div>T√πy ch·ªânh</div>
              </button>
            </div>
          </div>
        </div>

        <!-- Report History -->
        <div class="card">
          <div class="card-header">
            <div class="flex justify-between items-center">
              <h3 class="card-title">L·ªäCH S·ª¨ B√ÅO C√ÅO</h3>
              <input
                type="text"
                class="form-input"
                placeholder="T√¨m ki·∫øm b√°o c√°o..."
                style="max-width: 300px"
                onkeyup="filterReports(this.value)"
              />
            </div>
          </div>
          <div class="card-body">
            <div class="table-container">
              <table class="table" id="reportsTable">
                <thead>
                  <tr>
                    <th>M√£ b√°o c√°o</th>
                    <th>T√™n b√°o c√°o</th>
                    <th>Lo·∫°i</th>
                    <th>Ng∆∞·ªùi t·∫°o</th>
                    <th>Ng√†y t·∫°o</th>
                    <th>Tr·∫°ng th√°i</th>
                    <th>Thao t√°c</th>
                  </tr>
                </thead>
                <tbody id="reportsTableBody">
                  <!-- Reports will be loaded here -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <style>
      .dashboard-container {
        background: var(--color-gray-100);
        min-height: 100vh;
      }

      .quick-reports {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: var(--space-3);
      }

      .report-quick-btn {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: var(--space-2);
        padding: var(--space-4);
        background: var(--color-white);
        border: 3px solid var(--color-black);
        cursor: pointer;
        transition: all var(--transition-base);
        font-family: var(--font-heading);
        font-weight: 700;
        font-size: 0.875rem;
      }

      .report-quick-btn:hover {
        background: var(--color-black);
        color: var(--color-white);
        transform: translateY(-4px);
        box-shadow: var(--shadow-lg);
      }

      .report-icon {
        font-size: 2.5rem;
      }

      .report-actions {
        display: flex;
        gap: var(--space-1);
      }

      .report-actions button {
        padding: 4px 8px;
        font-size: 0.75rem;
      }

      @media (max-width: 768px) {
        .quick-reports {
          grid-template-columns: repeat(2, 1fr);
        }
      }
    </style>

    <script src="js/data.js"></script>
    <script src="js/app.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        loadReports();
      });

      function loadReports() {
        const tbody = document.getElementById("reportsTableBody");
        const reports = sampleReports;

        tbody.innerHTML = reports
          .map(
            (report, index) => `
                <tr>
                    <td class="code">${report.id}</td>
                    <td>${report.name}</td>
                    <td><span class="badge badge-outline">${
                      report.type
                    }</span></td>
                    <td>${report.createdBy}</td>
                    <td>${formatDate(report.createdDate)}</td>
                    <td><span class="badge">${report.status}</span></td>
                    <td class="report-actions">
                        <button class="btn btn-small btn-outline" onclick="viewReport(${index})">Xem</button>
                        <button class="btn btn-small btn-outline" onclick="downloadReport(${index})">T·∫£i</button>
                        <button class="btn btn-small btn-outline" onclick="deleteReport(${index})">X√≥a</button>
                    </td>
                </tr>
            `
          )
          .join("");
      }

      function handleGenerateReport(event) {
        event.preventDefault();

        if (!validateForm("reportForm")) {
          return;
        }

        const reportType = document.getElementById("reportType").value;
        const exportFormat = document.getElementById("exportFormat").value;

        showToast("ƒêang t·∫°o b√°o c√°o...", "info");

        // Simulate report generation
        setTimeout(() => {
          showToast(
            `B√°o c√°o ƒë√£ ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng! (${exportFormat.toUpperCase()})`,
            "success"
          );
          loadReports();
        }, 2000);
      }

      function scheduleReport() {
        showToast("M·ªü c·ª≠a s·ªï l√™n l·ªãch b√°o c√°o...", "info");
        setTimeout(() => {
          alert(
            "Ch·ª©c nƒÉng l√™n l·ªãch b√°o c√°o ƒëang ƒë∆∞·ª£c ph√°t tri·ªÉn.\n\nC√°c t√≠nh nƒÉng:\n- L√™n l·ªãch h√†ng ng√†y/tu·∫ßn/th√°ng\n- G·ª≠i email t·ª± ƒë·ªông\n- L∆∞u tr·ªØ b√°o c√°o"
          );
        }, 500);
      }

      function generateQuickReport(type) {
        let reportName = "";
        switch (type) {
          case "monthly":
            reportName = "B√°o c√°o th√°ng";
            break;
          case "quarterly":
            reportName = "B√°o c√°o qu√Ω";
            break;
          case "annual":
            reportName = "B√°o c√°o nƒÉm";
            break;
          case "custom":
            reportName = "B√°o c√°o t√πy ch·ªânh";
            break;
        }

        showToast(`ƒêang t·∫°o ${reportName}...`, "info");
        setTimeout(() => {
          showToast(`${reportName} ƒë√£ ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng!`, "success");
        }, 1500);
      }

      function viewReport(index) {
        const report = sampleReports[index];
        showToast(`ƒêang m·ªü b√°o c√°o: ${report.name}`, "info");
        setTimeout(() => {
          alert(`Xem b√°o c√°o: ${report.name}\n\nCh·ª©c nƒÉng ƒëang ph√°t tri·ªÉn`);
        }, 500);
      }

      function downloadReport(index) {
        const report = sampleReports[index];
        showToast(`ƒêang t·∫£i xu·ªëng: ${report.name}`, "info");
        setTimeout(() => {
          showToast("T·∫£i xu·ªëng th√†nh c√¥ng!", "success");
        }, 1000);
      }

      function deleteReport(index) {
        const report = sampleReports[index];
        if (confirm(`B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a b√°o c√°o: ${report.name}?`)) {
          showToast("ƒê√£ x√≥a b√°o c√°o", "success");
          loadReports();
        }
      }

      function filterReports(searchValue) {
        filterTable("reportsTable", searchValue);
      }
    </script>
  </body>
</html>
